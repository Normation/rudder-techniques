<TECHNIQUE name="System Update">
  <DESCRIPTION>This technique can handle simple system wide updates on different Linux based systems.
### Configuration

Each update is unique and *must* be tagged by a unique `campaign name`. The name will be used to reference the scheduled system update by the agent.
Updates can be scheduled by giving a start date and a duration. The update is only ran once, and there is no retry in case of error.
The error will not persist so you will have to check manually in the node report it was successful or not. Except at update time, every report generated
by the technique will have the `not_applicable` status so it should be easy to identify the proper execution time in the logs.

### Post update

The technique will automatically run a Rudder inventory after the update if it was successful. A system reboot can also be triggered if needed.
  </DESCRIPTION>
  <DEPRECATED>This technique version is not maintained anymore, it will no longer be available in the next version of Rudder.</DEPRECATED>
  <MULTIINSTANCE>false</MULTIINSTANCE>
  <POLICYGENERATION>separated</POLICYGENERATION>
  <USEMETHODREPORTING>true</USEMETHODREPORTING>

  <BUNDLES>
    <NAME>rudder_system_update</NAME>
  </BUNDLES>

  <TMLS>
    <TML name="systemUpdate"/>
  </TMLS>

  <SYSTEMVARS>
    <NAME>AGENT_RUN_INTERVAL</NAME>
  </SYSTEMVARS>


  <SECTIONS>
    <SECTION name="Update the system" reporting="worst-case-weighted-one" id="Update the system" component="true">
      <SECTION name="${update}" id="system-update" multivalued="true" component="true">
        <REPORTKEYS>
          <VALUE id="system-update">${updateValue}</VALUE>
        </REPORTKEYS>
      </SECTION>
    </SECTION>
    <SECTION name="Campaign Infos" multivalued="false" component="false">
      <INPUT>
        <NAME>ENABLE_UPDATE</NAME>
        <DESCRIPTION>Activate or not the update. Must be "true", "false" or "enabled", "disabled"</DESCRIPTION>
      </INPUT>
      <INPUT>
        <NAME>CAMPAIGN_NAME</NAME>
        <DESCRIPTION>Friendly name of the update campaign</DESCRIPTION>
      </INPUT>
      <INPUT>
        <NAME>REBOOT</NAME>
        <DESCRIPTION>Reboot the node after update if needed. Must be "true", "false" or "enabled", "disabled"</DESCRIPTION>
      </INPUT>
    </SECTION>
    <SECTION name="Duration" multivalued="false" component="false">
      <INPUT>
        <NAME>MINUTES_SPLAY</NAME>
        <DESCRIPTION>Maximum duration in minutes of the campaign</DESCRIPTION>
      </INPUT>
      <INPUT>
        <NAME>HOURS_SPLAY</NAME>
        <DESCRIPTION>Maximum duration in hours of the campaign</DESCRIPTION>
      </INPUT>
    </SECTION>
    <SECTION name="Start date" multivalued="false" component="false">
      <INPUT>
        <NAME>START_ON_MINUTES</NAME>
        <DESCRIPTION>Minutes (00-59)</DESCRIPTION>
      </INPUT>
      <INPUT>
        <NAME>START_ON_HOURS</NAME>
        <DESCRIPTION>Hours (00-23)</DESCRIPTION>
      </INPUT>
      <INPUT>
        <NAME>START_ON_DAYS</NAME>
        <DESCRIPTION>Day (1-7, Monday is 1)</DESCRIPTION>
      </INPUT>
    </SECTION>
  </SECTIONS>
</TECHNIQUE>

